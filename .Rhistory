aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
racet <- ttestOneS(race, vars = vars(att), testValue = 4, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
weightt <- ttestOneS(weight, vars = vars(att), testValue = 4, effectSize = T)
weightt <- as.data.frame(weightt$ttest)
weightd <- round(weightt[[6]],2)
ethnict <- ttestOneS(ethnic, vars = vars(att), testValue = 4, effectSize = T)
ethnict <- as.data.frame(ethnict$ttest)
ethnicd <- round(ethnict[[6]],2)
sexualityt <- ttestOneS(sexuality, vars = vars(att), testValue = 4, effectSize = T)
sexualityt <- as.data.frame(sexualityt$ttest)
sexualityd <- round(sexualityt[[6]],2)
usat <- ttestOneS(usa, vars = vars(att), testValue = 4, effectSize = T)
usat <- as.data.frame(usat$ttest)
usad <- round(usat[[6]],2)
gender_sciencet <- ttestOneS(gender_science, vars = vars(att), testValue = 0, effectSize = T)
gender_sciencet <- as.data.frame(gender_sciencet$ttest)
gender_scienced <- round(gender_sciencet[[6]],2)
all_ds <- c(aged,raced,weightd,ethnicd,sexualityd,usad,gender_scienced) %>% as.data.frame()
colnames(all_ds) <- "es"
all_ds$Task <- c("Age","Race","Weight","Ethnicity","Sexuality","Nationalism","Gender-Science")
# compute es - iat
aget <- ttestOneS(age, vars = vars(IAT), testValue = 0, effectSize = T)
aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
racet <- ttestOneS(race, vars = vars(IAT), testValue = 0, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
skint <- ttestOneS(skin, vars = vars(IAT), testValue = 0, effectSize = T)
skint <- as.data.frame(skint$ttest)
skind <- round(skint[[6]],2)
weightt <- ttestOneS(weight, vars = vars(IAT), testValue = 0, effectSize = T)
weightt <- as.data.frame(weightt$ttest)
weightd <- round(weightt[[6]],2)
ethnict <- ttestOneS(ethnic, vars = vars(IAT), testValue = 0, effectSize = T)
ethnict <- as.data.frame(ethnict$ttest)
ethnicd <- round(ethnict[[6]],2)
sexualityt <- ttestOneS(sexuality, vars = vars(IAT), testValue = 0, effectSize = T)
sexualityt <- as.data.frame(sexualityt$ttest)
sexualityd <- round(sexualityt[[6]],2)
usat <- ttestOneS(usa, vars = vars(IAT), testValue = 0, effectSize = T)
usat <- as.data.frame(usat$ttest)
usad <- round(usat[[6]],2)
gen_sci_t <- ttestOneS(gender_science, vars = vars(IAT), testValue = 0, effectSize = T)
gen_sci_t <- as.data.frame(gen_sci_t$ttest)
gen_sci_d <- round(gen_sci_t[[6]],2)
all_ds <- c(aged,raced,skind,weightd,ethnicd,sexualityd,usad,gen_sci_d) %>% as.data.frame()
colnames(all_ds) <- "es"
all_ds$Task <- c("Age","Race","Skin","Weight","Ethnicity","Sexuality","Nationalism","Gender-Science")
blogdown::build_site()
blogdown::build_site()
blogdown::build_site()
?ggline
blogdown::build_site()
pp <- ggline(thermo_df, x = "Year", y = "Cohens_d", ylab = "Cohen's d", color = "Task", size = 2)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 20, color = "black", face = "bold")+
font("legend.text", size = 25, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
#pp <- pp +theme(legend.position="none")
pp
blogdown::build_site()
blogdown::build_site()
race_iat <- race %>% select(session_id,IAT,Year) %>% mutate(Task = "Race")
skin_iat <- skin %>% select(session_id,IAT,Year) %>% mutate(Task = "Skin")
age_iat <- age %>% select(session_id,IAT,Year) %>% mutate(Task = "Age")
ethnic_iat <- ethnic %>% select(session_id,IAT,Year) %>% mutate(Task = "Ethnicity")
sex_iat <- sexuality %>% select(session_id,IAT,Year) %>% mutate(Task = "Sexuality")
usa_iat <- usa %>% select(session_id,IAT,Year) %>% mutate(Task = "Nationalism")
gender_science_iat <- gender_science %>% select(session_id,IAT,Year) %>% mutate(Task = "Gender-Science")
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
cache = FALSE,
comment = NA,
prompt = FALSE,
tidy = TRUE
)
library(knitr)
options(max.print="275")
options(width = 1430)
opts_knit$set(width=200)
knitr::opts_chunk$set(fig.width=25, fig.height=10)
pacman::p_load(data.table,ggplot2,rlang,rmdformats,magrittr,dplyr,knitr,kableExtra,tidyr,jmv, ggpubr)
#source("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Pilots\\analysis\\RScriptsForAnalysis\\yba.funcs.R")
age <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\age\\age_iat_wide.csv") %>% filter(year >= 2009)
ethnic <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\ethnicity\\ethnic_iat_wide.csv") %>% filter(year >= 2009)
gender_science <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\gender_science\\gender_science_iat_wide.csv") %>% filter(year >= 2009)
gender_science$ att <- gender_science$diff_lsciarts
race <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\race\\race_iat_wide.csv") %>% filter(year >= 2009)
sexuality <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\sexuality\\sexuality_iat_wide.csv") %>% filter(year >= 2009)
weight <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\weight\\weight_iat_wide.csv") %>% filter(year >= 2009)
skin <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\skin\\skin_iat_wide.csv") %>% filter(year >= 2009)
usa <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\usa\\usa_iat_wide.csv") %>% filter(year >= 2009)
nall <- nrow(race) + nrow(skin) + nrow(ethnic) + nrow(age) + nrow(weight) + nrow(sexuality) + nrow(usa) + nrow(gender_science)
# compute es - iat
aget <- ttestOneS(age, vars = vars(IAT), testValue = 0, effectSize = T)
aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
racet <- ttestOneS(race, vars = vars(IAT), testValue = 0, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
skint <- ttestOneS(skin, vars = vars(IAT), testValue = 0, effectSize = T)
skint <- as.data.frame(skint$ttest)
skind <- round(skint[[6]],2)
weightt <- ttestOneS(weight, vars = vars(IAT), testValue = 0, effectSize = T)
weightt <- as.data.frame(weightt$ttest)
weightd <- round(weightt[[6]],2)
ethnict <- ttestOneS(ethnic, vars = vars(IAT), testValue = 0, effectSize = T)
ethnict <- as.data.frame(ethnict$ttest)
ethnicd <- round(ethnict[[6]],2)
sexualityt <- ttestOneS(sexuality, vars = vars(IAT), testValue = 0, effectSize = T)
sexualityt <- as.data.frame(sexualityt$ttest)
sexualityd <- round(sexualityt[[6]],2)
usat <- ttestOneS(usa, vars = vars(IAT), testValue = 0, effectSize = T)
usat <- as.data.frame(usat$ttest)
usad <- round(usat[[6]],2)
gen_sci_t <- ttestOneS(gender_science, vars = vars(IAT), testValue = 0, effectSize = T)
gen_sci_t <- as.data.frame(gen_sci_t$ttest)
gen_sci_d <- round(gen_sci_t[[6]],2)
all_ds <- c(aged,raced,skind,weightd,ethnicd,sexualityd,usad,gen_sci_d) %>% as.data.frame()
colnames(all_ds) <- "es"
all_ds$Task <- c("Age","Race","Skin","Weight","Ethnicity","Sexuality","Nationalism","Gender-Science")
pp <- ggdotchart(all_ds, x = "Task", y = "es",
color = "Task",                                # Color by groups
ylab = "Cohen's d",
#palette = c("#00AFBB", "#E7B800", "#FC4E07"), # Custom color palette
sorting = "descending",                       # Sort value in descending order
add = "segments",                             # Add segments from y = 0 to dots
rotate = TRUE,                                # Rotate vertically
#group = "cyl",                                # Order by groups
dot.size = 30,                                 # Large dot size
label = round(all_ds$es,3),                        # Add mpg values as dot labels
font.label = list(color = "white", size = 25,
vjust = 0.5),               # Adjust label parameters
ggtheme = theme_pubr()                        # ggplot2 theme
)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 30, color = "black", face = "bold")+
font("legend.text", size = 26, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
pp <- pp +theme(legend.position="none")
pp
# compute es - self reported direct preference
aget <- ttestOneS(age, vars = vars(att), testValue = 4, effectSize = T)
aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
racet <- ttestOneS(race, vars = vars(att), testValue = 4, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
weightt <- ttestOneS(weight, vars = vars(att), testValue = 4, effectSize = T)
weightt <- as.data.frame(weightt$ttest)
weightd <- round(weightt[[6]],2)
ethnict <- ttestOneS(ethnic, vars = vars(att), testValue = 4, effectSize = T)
ethnict <- as.data.frame(ethnict$ttest)
ethnicd <- round(ethnict[[6]],2)
sexualityt <- ttestOneS(sexuality, vars = vars(att), testValue = 4, effectSize = T)
sexualityt <- as.data.frame(sexualityt$ttest)
sexualityd <- round(sexualityt[[6]],2)
usat <- ttestOneS(usa, vars = vars(att), testValue = 4, effectSize = T)
usat <- as.data.frame(usat$ttest)
usad <- round(usat[[6]],2)
gender_sciencet <- ttestOneS(gender_science, vars = vars(att), testValue = 0, effectSize = T)
gender_sciencet <- as.data.frame(gender_sciencet$ttest)
gender_scienced <- round(gender_sciencet[[6]],2)
all_ds <- c(aged,raced,weightd,ethnicd,sexualityd,usad,gender_scienced) %>% as.data.frame()
colnames(all_ds) <- "es"
all_ds$Task <- c("Age","Race","Weight","Ethnicity","Sexuality","Nationalism","Gender-Science")
pp <- ggdotchart(all_ds, x = "Task", y = "es",
color = "Task",                                # Color by groups
ylab = "Cohen's d",
#palette = c("#00AFBB", "#E7B800", "#FC4E07"), # Custom color palette
sorting = "descending",                       # Sort value in descending order
add = "segments",                             # Add segments from y = 0 to dots
rotate = TRUE,                                # Rotate vertically
#group = "cyl",                                # Order by groups
dot.size = 30,                                 # Large dot size
label = round(all_ds$es,3),                        # Add mpg values as dot labels
font.label = list(color = "white", size = 25,
vjust = 0.5),               # Adjust label parameters
ggtheme = theme_pubr()                        # ggplot2 theme
)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 30, color = "black", face = "bold")+
font("legend.text", size = 26, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
pp <- pp +theme(legend.position="none")
pp
# compute es - thermometer
aget <- ttestOneS(age, vars = vars(diff_thermo), testValue = 0, effectSize = T)
aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
racet <- ttestOneS(race, vars = vars(diff_thermo), testValue = 0, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
skint <- ttestOneS(skin, vars = vars(diff_thermo), testValue = 0, effectSize = T)
skint <- as.data.frame(skint$ttest)
skind <- round(skint[[6]],2)
weightt <- ttestOneS(weight, vars = vars(diff_thermo), testValue = 0, effectSize = T)
weightt <- as.data.frame(weightt$ttest)
weightd <- round(weightt[[6]],2)
usat <- ttestOneS(usa, vars = vars(diff_thermo), testValue = 0, effectSize = T)
usat <- as.data.frame(usat$ttest)
usad <- round(usat[[6]],2)
all_ds <- c(aged,raced,skind,weightd,usad) %>% as.data.frame()
colnames(all_ds) <- "es"
all_ds$Task <- c("Age","Race","Skin","Weight","Nationalism")
pp <- ggdotchart(all_ds, x = "Task", y = "es",
color = "Task",                                # Color by groups
ylab = "Cohen's d",
#palette = c("#00AFBB", "#E7B800", "#FC4E07"), # Custom color palette
sorting = "descending",                       # Sort value in descending order
add = "segments",                             # Add segments from y = 0 to dots
rotate = TRUE,                                # Rotate vertically
#group = "cyl",                                # Order by groups
dot.size = 30,                                 # Large dot size
label = round(all_ds$es,3),                        # Add mpg values as dot labels
font.label = list(color = "white", size = 25,
vjust = 0.5),               # Adjust label parameters
ggtheme = theme_pubr()                        # ggplot2 theme
)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 30, color = "black", face = "bold")+
font("legend.text", size = 26, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
pp <- pp +theme(legend.position="none")
pp
age <- age %>% drop_na(year)
age$Year <- as.factor(age$year)
race <- race %>% drop_na(year)
race$Year <- as.factor(race$year)
skin <- skin %>% drop_na(year)
skin$Year <- as.factor(skin$year)
ethnic <- ethnic %>% drop_na(year)
ethnic$Year <- as.factor(ethnic$year)
weight <- weight %>% drop_na(year)
weight$Year <- as.factor(weight$year)
sexuality <- sexuality %>% drop_na(year)
sexuality$Year <- as.factor(sexuality$year)
usa <- usa %>% drop_na(year)
usa$Year <- as.factor(usa$year)
gender_science<- gender_science %>% drop_na(year)
gender_science$Year <- as.factor(gender_science$year)
race_iat <- race %>% select(session_id,IAT,Year) %>% mutate(Task = "Race")
skin_iat <- skin %>% select(session_id,IAT,Year) %>% mutate(Task = "Skin")
age_iat <- age %>% select(session_id,IAT,Year) %>% mutate(Task = "Age")
ethnic_iat <- ethnic %>% select(session_id,IAT,Year) %>% mutate(Task = "Ethnicity")
sex_iat <- sexuality %>% select(session_id,IAT,Year) %>% mutate(Task = "Sexuality")
usa_iat <- usa %>% select(session_id,IAT,Year) %>% mutate(Task = "Nationalism")
gender_science_iat <- gender_science %>% select(session_id,IAT,Year) %>% mutate(Task = "Gender-Science")
weight_iat <- weight %>% select(session_id,IAT,Year) %>% mutate(Task = "Weight")
all_iat <- bind_rows(race_iat,skin_iat,ethnic_iat,age_iat,sex_iat,usa_iat,gender_science_iat,weight_iat)
race_att <- race %>% select(session_id,att,Year) %>% mutate(Task = "Race")
#skin_att <- skin %>% select(session_id,att,Year) %>% mutate(Task = "Skin")
age_att <- age %>% select(session_id,att,Year) %>% mutate(Task = "Age")
ethnic_att <- ethnic %>% select(session_id,att,Year) %>% mutate(Task = "Ethnicity")
sex_att <- sexuality %>% select(session_id,att,Year) %>% mutate(Task = "Sexuality")
usa_att <- usa %>% select(session_id,att,Year) %>% mutate(Task = "Nationalism")
gender_science_att <- gender_science %>% select(session_id,att,Year) %>% mutate(Task = "Gender-Science")
weight_att <- weight %>% select(session_id,att,Year) %>% mutate(Task = "Weight")
all_att <- bind_rows(race_att,ethnic_att,age_att,sex_att,usa_att,weight_att)
all_att$att_rs <- all_att$att - 4
gender_science_att$att_rs <- gender_science_att$att
all_att <- bind_rows(all_att,gender_science_att)
race_diff_thermo <- race %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Race")
skin_diff_thermo <- skin %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Skin")
age_diff_thermo <- age %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Age")
#ethnic_diff_thermo <- ethnic %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Ethnicity")
#sex_diff_thermo <- sexuality %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Sexuality")
usa_diff_thermo <- usa %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Nationalism")
#gender_science_diff_thermo <- gender_science %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Gender-Science")
weight_diff_thermo <- weight %>% select(session_id,diff_thermo,Year) %>% mutate(Task = "Weight")
all_diff_thermo <- bind_rows(race_diff_thermo,skin_diff_thermo,age_diff_thermo,usa_diff_thermo,weight_diff_thermo)
library(magrittr)
library(effectsize)
# iat
get_es_iat <- function(x)
{
es <- x$IAT %>% cohens_d()
es <- round((es),2)
es_list <- list(es = es)
}
df <- all_iat %>% drop_na() %>% group_by(Task,Year) %>% nest() %>% drop_na()
iat_df <- df %>% mutate(params = purrr::map(.x = data, .f = ~get_es_iat(.x))) %>%
unnest_wider(params) %>% select(-data) %>% unnest_wider(es)
# self-reported preference
get_es_sr <- function(x)
{
es <- x$att_rs %>% cohens_d()
es <- round((es),2)
es_list <- list(es = es)
}
df <- all_att %>% drop_na() %>% group_by(Task,Year) %>% nest() %>% drop_na()
att_df <- df %>% mutate(params = purrr::map(.x = data, .f = ~get_es_sr(.x))) %>%
unnest_wider(params) %>% select(-data) %>% unnest_wider(es)
# self-reported thermometer
get_es_thr <- function(x)
{
es <- x$diff_thermo %>% cohens_d()
es <- round((es),2)
es_list <- list(es = es)
}
df <- all_diff_thermo %>% drop_na() %>% group_by(Task,Year) %>% nest() %>% drop_na()
thermo_df <- df %>% mutate(params = purrr::map(.x = data, .f = ~get_es_thr(.x))) %>%
unnest_wider(params) %>% select(-data) %>% unnest_wider(es)
att_df$Year = factor(att_df$Year, c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020"))
pp <- ggline(att_df, x = "Year", y = "Cohens_d", ylab = "Cohen's d", color = "Task", size = 2)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 20, color = "black", face = "bold")+
font("legend.text", size = 25, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
#pp <- pp +theme(legend.position="none")
pp
iat_df$Year = factor(iat_df$Year, c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020"))
pp <- ggline(iat_df, x = "Year", y = "Cohens_d", ylab = "Cohen's d", color = "Task", size = 2)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 20, color = "black", face = "bold")+
font("legend.text", size = 25, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
#pp <- pp +theme(legend.position="none")
pp
unlink('content/post/2020-10-01-biases-in-israel.en_cache', recursive = TRUE)
blogdown::build_site()
blogdown::build_site()
blogdown::build_site()
blogdown::build_site()
ethnic1 <- ethnic %>% drop_na(ethnic.c)
pp <- ggviolin(ethnic1, x = "ethnic.c",
y = c("IAT"),
combine = TRUE,
ylab = "IAT",
xlab = "Ethnicity",
color = "black",
fill = "ethnic.c",
add = c("mean_ci"),
draw_quantiles = c(0.25,0.5,0.75)
)
pp <- pp + geom_hline(yintercept=0, linetype="dashed",
color = "darkblue", size=1.2)
pp <- pp +
font("title", size = 24, color = "black", face = "bold")+
font("legend.text", size = 23, color = "black", face = "bold")+
font("xlab", size = 24, color = "black", face = "bold")+
font("ylab", size = 24, color = "black", face = "bold")+
font("xy.text", size = 20, color = "black")
pp <- pp +theme(legend.position="none")
pp
blogdown::build_site()
levels(all_iat$Year)
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
cache = FALSE,
comment = NA,
prompt = FALSE,
tidy = TRUE
)
library(knitr)
options(max.print="275")
options(width = 1430)
opts_knit$set(width=200)
knitr::opts_chunk$set(fig.width=25, fig.height=10)
all_iat <- all_iat %>% filter(Year != "2020")
pacman::p_load(data.table,ggplot2,rlang,rmdformats,magrittr,dplyr,knitr,kableExtra,tidyr,jmv, ggpubr)
#source("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Pilots\\analysis\\RScriptsForAnalysis\\yba.funcs.R")
all_iat <- all_iat %>% filter(Year != "2020")
all_att <- all_att %>% filter(Year != "2020")
all_diff_thermo <- all_diff_thermo %>% filter(Year != "2020")
library(magrittr)
library(effectsize)
# iat
get_es_iat <- function(x)
{
es <- x$IAT %>% cohens_d()
es <- round((es),2)
es_list <- list(es = es)
}
df <- all_iat %>% drop_na() %>% group_by(Task,Year) %>% nest() %>% drop_na()
iat_df <- df %>% mutate(params = purrr::map(.x = data, .f = ~get_es_iat(.x))) %>%
unnest_wider(params) %>% select(-data) %>% unnest_wider(es)
# self-reported preference
get_es_sr <- function(x)
{
es <- x$att_rs %>% cohens_d()
es <- round((es),2)
es_list <- list(es = es)
}
df <- all_att %>% drop_na() %>% group_by(Task,Year) %>% nest() %>% drop_na()
att_df <- df %>% mutate(params = purrr::map(.x = data, .f = ~get_es_sr(.x))) %>%
unnest_wider(params) %>% select(-data) %>% unnest_wider(es)
# self-reported thermometer
get_es_thr <- function(x)
{
es <- x$diff_thermo %>% cohens_d()
es <- round((es),2)
es_list <- list(es = es)
}
df <- all_diff_thermo %>% drop_na() %>% group_by(Task,Year) %>% nest() %>% drop_na()
thermo_df <- df %>% mutate(params = purrr::map(.x = data, .f = ~get_es_thr(.x))) %>%
unnest_wider(params) %>% select(-data) %>% unnest_wider(es)
iat_df$Year = factor(iat_df$Year, c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"))#, "2020"
pp <- ggline(iat_df, x = "Year", y = "Cohens_d", ylab = "Cohen's d", color = "Task", size = 2)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 20, color = "black", face = "bold")+
font("legend.text", size = 25, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
#pp <- pp +theme(legend.position="none")
pp
att_df$Year = factor(att_df$Year, c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019")) #, "2020"
pp <- ggline(att_df, x = "Year", y = "Cohens_d", ylab = "Cohen's d", color = "Task", size = 2)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 20, color = "black", face = "bold")+
font("legend.text", size = 25, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
#pp <- pp +theme(legend.position="none")
pp
thermo_df$Year = factor(thermo_df$Year, c("2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019")) #, "2020"
pp <- ggline(thermo_df, x = "Year", y = "Cohens_d", ylab = "Cohen's d", color = "Task", size = 2)
pp <- pp + geom_hline(yintercept = 0, linetype = "dashed", color = "darkblue",
size = 1.2)
pp <- pp + font("title", size = 20, color = "black", face = "bold")+
font("legend.text", size = 25, color = "black", face = "bold")+
font("xlab", size = 28, color = "black", face = "bold")+
font("ylab", size = 28, color = "black", face = "bold")+
font("xy.text", size = 25, color = "black", face = "bold")
#pp <- pp +theme(legend.position="none")
pp
View(ethnic)
table(ethnic$ethnicityomb)
ethnic <- ethnic %>% filter(ethnicityomb == "JEW")
table(ethnic$ethnic.c)
aged2 <- cohens_d(age$IAT)
aged
aged2
raced2 <- cohens_d(race$IAT)
raced
raced2
aget <- ttestOneS(age, vars = vars(IAT), testValue = 0, effectSize = T)
aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
aged2 <- cohens_d(age$IAT)
racet <- ttestOneS(race, vars = vars(IAT), testValue = 0, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
raced2 <- cohens_d(race$IAT)
raced
raced2
blogdown::build_site()
pacman::p_load(data.table,ggplot2,rlang,rmdformats,magrittr,dplyr,knitr,kableExtra,tidyr,jmv, ggpubr)
#source("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Pilots\\analysis\\RScriptsForAnalysis\\yba.funcs.R")
age <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\age\\age_iat_wide.csv") %>% filter(year >= 2009)
ethnic <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\ethnicity\\ethnic_iat_wide.csv") %>% filter(year >= 2009)
gender_science <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\gender_science\\gender_science_iat_wide.csv") %>% filter(year >= 2009)
gender_science$diff_thermo <- gender_science$diff_lsciarts
race <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\race\\race_iat_wide.csv") %>% filter(year >= 2009)
sexuality <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\sexuality\\sexuality_iat_wide.csv") %>% filter(year >= 2009)
weight <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\weight\\weight_iat_wide.csv") %>% filter(year >= 2009)
skin <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\skin\\skin_iat_wide.csv") %>% filter(year >= 2009)
usa <- fread("C:\\Users\\Lenovo\\Google Drive\\School\\PhD\\Lab projects\\pi international data\\Israel\\usa\\usa_iat_wide.csv") %>% filter(year >= 2009)
# compute es - thermometer
aget <- ttestOneS(age, vars = vars(diff_thermo), testValue = 0, effectSize = T)
aget <- as.data.frame(aget$ttest)
aged <- round(aget[[6]],2)
racet <- ttestOneS(race, vars = vars(diff_thermo), testValue = 0, effectSize = T)
racet <- as.data.frame(racet$ttest)
raced <- round(racet[[6]],2)
skint <- ttestOneS(skin, vars = vars(diff_thermo), testValue = 0, effectSize = T)
skint <- as.data.frame(skint$ttest)
skind <- round(skint[[6]],2)
weightt <- ttestOneS(weight, vars = vars(diff_thermo), testValue = 0, effectSize = T)
weightt <- as.data.frame(weightt$ttest)
weightd <- round(weightt[[6]],2)
usat <- ttestOneS(usa, vars = vars(diff_thermo), testValue = 0, effectSize = T)
usat <- as.data.frame(usat$ttest)
usad <- round(usat[[6]],2)
gender_sciencet <- ttestOneS(gender_science, vars = vars(att), testValue = 0, effectSize = T)
gender_sciencet <- ttestOneS(gender_science, vars = vars(diff_thermo), testValue = 0, effectSize = T)
gender_sciencet <- as.data.frame(gender_sciencet$ttest)
gender_scienced <- round(gender_sciencet[[6]],2)
all_ds <- c(aged,raced,skind,weightd,usad,gender_scienced) %>% as.data.frame()
colnames(all_ds) <- "es"
all_ds$Task <- c("Age","Race","Skin","Weight","Nationalism","Gender-Science")
blogdown::build_site()
blogdown::build_site()
